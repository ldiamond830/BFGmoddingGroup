version "4.9.1"
//main file + monster definitions
#include "ammo"
#include "weapons"

//this is purely for testing
Class BigZombieman : Zombieman
{
    Default
    {
        health 1000;
        scale 2;
        radius 40;
        height 40;
		Tag "Big Zombieman (testing only)";
    }
}



Class SnowFlake : LostSoul {
Default{
Health 75;
-FLOAT
AttackSound "Snowflake/Attack";
PainSound "Snowflake/Pain";
DeathSound "Snowflake/Death";
ActiveSound "Snowflake/Active";
Obituary "%o was frozen to death";
Tag "Snowflake";
}
States
	{
	Spawn:
		SNFK A 10 BRIGHT A_Look;
		Loop;
	See:
		SNFK A 6 BRIGHT A_Chase;
		Loop;
	Missile:
		SNFK A 10 BRIGHT A_FaceTarget;
		SNFK A 4 BRIGHT A_SkullAttack;
		SNFK A 4 BRIGHT;
		Goto Missile+2;
	Pain:
		SNFK A 3 BRIGHT;
		SNFK A 3 BRIGHT A_Pain;
		Goto See;
	Death:
		SNFK A 6 BRIGHT A_Scream;
		SNFK A 6 BRIGHT A_NoBlocking;
		SNFK A 6;
		Stop;
	}
}

Class IceGolem : Actor{
Default
	{
		Health 4;
		Radius 40;
		Height 110;
		Mass 1000;
		Speed 16;
		PainChance 20;
		Monster;
		MinMissileChance 160;
		+BOSS 
		+MISSILEMORE
		+FLOORCLIP
		+NORADIUSDMG
		+DONTMORPH
		+BOSSDEATH
		Obituary "Player was shattered by the Ice Golem";
		Tag "Ice Golem";
		DeathSound "Golem/Death";
		SeeSound "Golem/See";
		ActiveSound "Golem/Active";
	}
	States
	{
	Spawn:
		CYBR AB 10 A_Look;
		Loop;
	See:
		CYBR A 3 A_Hoof;
		CYBR ABBCC 3 A_Chase;
		CYBR D 3 A_Metal;
		CYBR D 3 A_Chase;
		Loop;
	Missile:
		CYBR E 6 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		CYBR E 12 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		CYBR E 12 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		Goto See;
	Pain:
		CYBR G 10 A_Pain;
		Goto See;
	Death:
		CYBR H 10;
		CYBR I 10 A_Scream;
		CYBR JKL 10;
		CYBR M 10 A_NoBlocking;
		CYBR NO 10;
		CYBR P 30;
		CYBR P -1 A_BossDeath;
		Stop;
	}
}

Class StenWizard : Cacodemon{

Default{
	Health 4500;
	Radius 20;
	Height 56;
	Mass 100000;
	Speed 20;
	FloatSpeed 20;
	PainChance 25;
	Monster;
	+BOSS
	+BOSSDEATH
	+FLOAT
	+FLOATBOB
	+NOGRAVITY
	+SPAWNCEILING
	-STAYMORPHED
	SeeSound "Sten/See";
	AttackSound "Sten/Attack";
	PainSound "Sten/Pain";
	DeathSound "Sten/Death";
	Obituary "Player was annihilated by the dark wizard Sten";
	Tag "Wizard Sten";
	

}
States
	{
	Spawn:
		STEN A 1 A_Look;
		Loop;
	See:
		STEN A 1 A_Chase;
		Loop;
	Melee:
		Goto Missile;
	Missile:
		STEN A 0 BRIGHT A_FaceTarget;
		STEN A 2 BRIGHT A_FaceTarget;
		STEN B 10 {
		
		//uses rng to either pick attack
		if (random(1,2)==1)
		{
			if(target)
			{
					int Dist = Distance3D(target);
					int zDiff = (self.pos.z - target.pos.z);
					//uses close range bomb if player is within a certain distance
					if (Dist < 400)
					{
						SetStateLabel("Bomb");
					}
					else
					{
						SetStateLabel("RingShot");
					}
				
			}
		}
		
		}
		
		STEN B 10 A_FaceTarget;
		Goto MassiveShot;
	Bomb:
	STEN C 1 A_FaceTarget;
	STEN D 10 
	{
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH);
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH, 30);
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH, -30);
		A_PlaySound("Sten/Attack");
	}
	STEN C 10 A_FaceTarget;
	Goto See;
	
	RingShot:
	STEN C 10;
	STEN D 10{
		for(int i = 0; i < 12; i++)
		{
		int degAngle = 360.0f / i;
		//converts degree angle to a fixed point number which ZDoom uses for angles 
		int fixedPointAngle = degAngle << 16;
		 A_SpawnProjectile("StenProjectile", 32, cos(fixedPointAngle) * 50, sin(fixedPointAngle) * 50, CMF_AIMDIRECTION, 5);
		 A_PlaySound("Sten/Attack");
		}
	}
	Goto See;
	
	MassiveShot:
	STEN C 40{
	A_SpawnProjectile("StenMassiveProjectile", 90);
	A_PlaySound("Sten/Attack");
	}
	STEN D 10 A_SpawnProjectile("StenMassiveProjectileMoving", 90);
	Goto See;
	Pain:
	STEN A 1 A_Look;
	Goto See;
	Death:
		SKUL H 8 BRIGHT A_Scream;
		SKUL I 8 BRIGHT A_NoBlocking;
		SKUL J 8;
		SKUL K 8;
		Stop;
	Raise:
		STEN B 8 A_UnSetFloorClip;
		STEN B 8;
		Goto See;
	}
	
	
}


