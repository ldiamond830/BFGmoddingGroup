version "4.9.1"
//main file + monster definitions
#include "ammo"
#include "weapons"
Class BigZombieman : Zombieman
{
    Default
    {
        health 1000;
        scale 2;
        radius 40;
        height 40;
		Tag "Big Zombieman (testing only)";
    }
}



Class IceEnemy : LostSoul {
Default{
-FLOAT
Obituary "%o was frozen to death";
Tag "Snowflake";
}
}

Class IceGolem : Actor{
Default
	{
		Health 4000;
		Radius 40;
		Height 110;
		Mass 1000;
		Speed 16;
		PainChance 20;
		Monster;
		MinMissileChance 160;
		+BOSS 
		+MISSILEMORE
		+FLOORCLIP
		+NORADIUSDMG
		+DONTMORPH
		+BOSSDEATH
		SeeSound "cyber/sight";
		PainSound "cyber/pain";
		DeathSound "cyber/death";
		ActiveSound "cyber/active";
		Obituary "Player was shattered by the Ice Golem";
		Tag "Ice Golem";
	}
	States
	{
	Spawn:
		CYBR AB 10 A_Look;
		Loop;
	See:
		CYBR A 3 A_Hoof;
		CYBR ABBCC 3 A_Chase;
		CYBR D 3 A_Metal;
		CYBR D 3 A_Chase;
		Loop;
	Missile:
		CYBR E 6 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		CYBR E 12 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		CYBR E 12 A_FaceTarget;
		CYBR F 12 A_SpawnProjectile("BossIcicleProjectile");
		Goto See;
	Pain:
		CYBR G 10 A_Pain;
		Goto See;
	Death:
		CYBR H 10;
		CYBR I 10 A_Scream;
		CYBR JKL 10;
		CYBR M 10 A_NoBlocking;
		CYBR NO 10;
		CYBR P 30;
		CYBR P -1 A_BossDeath;
		Stop;
	}
}

Class StenWizard : Cacodemon{

Default{
	Health 4500;
	Radius 20;
	Height 56;
	Mass 100000;
	Speed 20;
	FloatSpeed 20;
	PainChance 25;
	Monster;
	+BOSS
	+BOSSDEATH
	+FLOAT
	+FLOATBOB
	+NOGRAVITY
	+SPAWNCEILING
	-STAYMORPHED
	SeeSound "spider/sight";
	AttackSound "spider/attack";
	PainSound "spider/pain";
	DeathSound "spider/death";
	ActiveSound "spider/active";
	Obituary "Player was annihilated by the dark wizard Sten";
	Tag "Wizard Sten";
	

}
States
	{
	Spawn:
		SKEL AB 10 A_Look;
		Loop;
	See:
		SKEL AABBCCDDEEFF 2 A_Chase;
		Loop;
	Melee:
		SKEL G 0 A_FaceTarget;
		SKEL G 6 A_SkelWhoosh;
		SKEL H 6 A_FaceTarget;
		SKEL I 6 A_SkelFist;
		Goto See;
	Missile:
		SKEL J 0 BRIGHT A_FaceTarget;
		SKEL J 10 BRIGHT A_FaceTarget;
		SKEL K 10 {
		
		//uses rng to either pick attack
		if (random(1,2)==1)
		{
			if(target)
			{
					int Dist = Distance3D(target);
					int zDiff = (self.pos.z - target.pos.z);
					//uses close range bomb if player is within a certain distance
					if (Dist < 400)
					{
						SetStateLabel("Bomb");
					}
					else
					{
						SetStateLabel("MassiveShot");
					}
				
			}
		}
		
		}
		
		SKEL K 10 A_FaceTarget;
		Goto MassiveShot;
	Bomb:
	SKEL G 0 A_FaceTarget;
	SKEL K 10 
	{
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH);
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH, 30);
		A_SpawnProjectile("StenBomb", 32, 0, 0, CMF_OFFSETPITCH, -30);
	}
	SKEL K 10 A_FaceTarget;
	Goto See;
	
	RingShot:
	SKEL G 10 A_Log("RingShot");
	SKEL K 10{
		for(int i = 0; i < 12; i++)
		{
		int degAngle = 360.0f / i;
		//converts degree angle to a fixed point number which ZDoom uses for angles 
		int fixedPointAngle = degAngle << 16;
		 A_SpawnProjectile("StenProjectile", 32, cos(fixedPointAngle) * 50, sin(fixedPointAngle) * 50, CMF_AIMDIRECTION, 5);
		}
	}
	Goto See;
	
	MassiveShot:
	SKEL G 40 A_SpawnProjectile("StenMassiveProjectile", 90, 0,0);
	SKEL G 10 A_SpawnProjectile("StenMassiveProjectileMoving", 90, 0,0);
	Goto See;
	
	Pain:
		SKEL L 5;
		SKEL L 5 A_Pain;
		Goto See;
	Death:
		SKEL LM 7;
		SKEL N 7 A_Scream;
		SKEL O 7 A_NoBlocking;
		SKEL P 7;
		SKEL Q -1;
		Stop;
	Raise:
		HEAD L 8 A_UnSetFloorClip;
		HEAD KJIHG 8;
		Goto See;
	}
	
	
}


